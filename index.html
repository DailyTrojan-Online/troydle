<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Trojan Games - Troydle</title>
    <link rel="icon" href="./imgs/troydle.png" type="image/x-icon">
    <link rel="stylesheet" href="./dailytrojan-lib/fonts/fonts.css">
    <link rel="stylesheet" href="./dailytrojan-lib/gameStyles.css">
    <link rel="stylesheet" href="./styles/styles.css">
    <link rel="stylesheet" href="./dailytrojan-lib/icons/tabler-icons.css">
    <script src="./dailytrojan-lib/gameCore.js" defer></script>
    <script src="./scripts/fuse.basic.min.js"></script>
    <script src="./scripts/troydleSongs.js"></script>
    <script src="./scripts/troydle.js" defer></script>
</head>

<body>
    <header>
        <a href="https://dailytrojan.com/games/">
            <img id="dt-logo" src="./imgs/dt-logo.png" height="50" width=auto style="cursor: pointer;"
                onclick="homeRedirect()" alt="Daily Trojan Logo" /></a>
    </header>
    <div class="game-splash-wrapper" id="splash">
        <img width="80" src="./imgs/troydle.svg" />
        <h1>Troydle</h1>
        <h2 id="game-tagline">Guess the song played by the USC Marching band.</h2>
        <div class="flex-hor">
            <button onclick="DTGCore.homeRedirect()" id="game-back-button">Back</button>
            <button onclick="startGame()" id="game-action-button">Play</button>
        </div>
        <p id="splash-date"></p>
        <p id="splash-credits">Game by Noah Pinales</p>
    </div>
    <main>
        <div class="game-wrapper">
            <div class="top-content">

                <h1><span style="color: var(--cardinal)">Troy</span>dle</h1>
                <div class="song-bar">
                    <div class="song-progress" id="progress-bar"></div>
                    <div class="overlay">
                        <div class="overlay-1s"></div>
                        <div class="overlay-1s" id="attempt-overlay-1"></div>
                        <div class="overlay-2s" id="attempt-overlay-2"></div>
                        <div class="overlay-3s" id="attempt-overlay-3"></div>
                        <div class="overlay-4s" id="attempt-overlay-4"></div>
                        <div class="overlay-5s" id="attempt-overlay-5"></div>
                    </div>
                </div>
                <div class="song-details">
                    <div class="song-time" id="song-current-time">
                        0:00
                    </div>
                    <div class="song-attempts" id="song-attempts-remaining">
                    </div>
                    <div class="song-time">0:16</div>
                </div>
            </div>
            <div class="fill-scroll">
                <div class="attempts" id="attempt-parent">
                </div>
                <div class="search-results hidden" id="search-results">
                </div>
            </div>
            <div class="bottom-content" id="bottom-content">
                <div class="type-bar">
                    <button class="play" onclick="playSong()">
                        <i class="ti ti-player-play-filled"></i>
                    </button>
                    <input type="text" placeholder="Write your guess here!" id="text-input"
                        oninput="onInput(event, this)" />
                    <button onclick="submitOrSkip()" id="submit-button" disabled={guessText !="" && !searchSelected}>
                        Submit
                    </button>
                </div>
            </div>
            <div class="view-results-button hidden" id="view-results-button">
                <button onclick="viewResults()"><i class="ti ti-chart-bar"></i>View Results</button>
            </div>
        </div>
    </main>
    <div class="modal-wrapper" id="result-modal">
        <div class="modal-content">
            <div class="modal-inner">
                <img width="80" src="./imgs/troydle.svg" />
                <h1 id="modal-title">Great job!</h1>
                <div class="history-stats">
                    <div class="stat">
                        <h1 id="total-plays"></h1>
                        <p>Played</p>
                    </div>
                    <div class="stat">
                        <h1 id="total-wins"></h1>
                        <p>Wins</p>
                    </div>
                    <div class="stat">
                        <h1 id="daily-streak"></h1>
                        <p>Daily Streak</p>
                    </div>
                    <div class="stat">
                        <h1 id="win-streak"></h1>
                        <p>Win Streak</p>
                    </div>
                </div>
                <h2 style="font-weight: normal">The song was <strong id="song-title"></strong></h2>
                <br>
                <div class="flex-hor">
                    <button onclick="externalRedirect()">
                        <i id="modal-player-icon" class="ti ti-player-play-filled"></i> Listen on Spotify
                    </button>
                </div>

                <button class="close-button" onclick="viewGame()"><i class="ti ti-x"></i></button>
                <div class="flex-hor">
                    <button onclick="DTGCore.homeRedirect()"><i class="ti ti-device-gamepad"></i>All Games</button>
                    <button onclick="copyResultsString()" class="button-share"><i class="ti ti-share"></i> Share
                        Results</button>
                </div>
                <a
                    href="https://docs.google.com/forms/d/e/1FAIpQLSfzk0dC8SsfzfbbCXP4_YOsIw6ja_9zdOIVki3L48HX9QH-pg/viewform?usp=dialog">Help
                    us improve Troydle! <u>Share your feedback.</u></a>
            </div>
        </div>
    </div>
    <script>
        !function (g, s, q, r, d) {
            r = g[r] = g[r] || function () { (r.q = r.q || []).push(arguments) };
            d = s.createElement(q); d.src = '//d1l6p2sc9645hc.cloudfront.net/gosquared.js'; q =
                s.getElementsByTagName(q)[0]; q.parentNode.insertBefore(d, q)
        }(window, document
            , 'script', '_gs');
        _gs('GSN-607631-E');
        _gs('set', 'anonymizeIP', true);
    </script>
</body>

</html>